Version 4
SHEET 1 1920 1056
WIRE 1088 16 992 16
WIRE 1280 16 1088 16
WIRE 1872 16 1280 16
WIRE 656 32 608 32
WIRE 992 48 992 16
WIRE 528 112 480 112
WIRE 816 112 784 112
WIRE 944 112 816 112
WIRE 608 128 608 32
WIRE 656 128 608 128
WIRE 784 128 784 112
WIRE 1472 128 1376 128
WIRE 304 160 32 160
WIRE 32 176 32 160
WIRE 480 176 480 112
WIRE 480 176 448 176
WIRE 1088 176 1088 16
WIRE 1088 176 992 176
WIRE 304 208 304 160
WIRE 656 208 656 128
WIRE 656 208 512 208
WIRE 736 208 720 208
WIRE 992 208 992 176
WIRE 1328 208 1248 208
WIRE 32 224 32 176
WIRE 400 224 400 144
WIRE 512 224 512 208
WIRE 848 224 784 224
WIRE 1280 224 1280 16
WIRE 1376 224 1280 224
WIRE 480 240 464 240
WIRE 624 256 544 256
WIRE 688 256 624 256
WIRE 848 256 848 224
WIRE 848 256 784 256
WIRE 1392 256 1376 256
WIRE 1472 256 1472 128
WIRE 1472 256 1392 256
WIRE 400 272 400 256
WIRE 480 272 400 272
WIRE 784 272 784 256
WIRE 944 288 944 112
WIRE 992 288 992 272
WIRE 992 288 944 288
WIRE 1248 288 1248 208
WIRE 1248 288 992 288
WIRE 1376 288 1376 256
WIRE 448 304 448 176
WIRE 512 304 512 288
WIRE 512 304 448 304
WIRE 32 320 32 304
WIRE 32 320 -144 320
WIRE 624 336 624 320
WIRE 624 336 496 336
WIRE 656 336 656 208
WIRE 656 336 624 336
WIRE -144 352 -144 320
WIRE 304 352 304 288
WIRE 688 352 688 256
WIRE 736 352 688 352
WIRE 304 368 304 352
WIRE 400 368 400 288
WIRE 400 368 304 368
WIRE 464 368 464 240
WIRE 464 368 432 368
WIRE 992 368 992 288
WIRE 1328 368 992 368
WIRE 720 416 720 208
WIRE 720 416 592 416
WIRE 1376 448 1376 384
WIRE 432 464 432 368
WIRE 480 464 432 464
WIRE 784 464 784 368
WIRE 240 512 32 512
WIRE 32 528 32 512
WIRE 1792 528 1728 528
WIRE 528 544 464 544
WIRE 1376 544 1376 528
WIRE 1584 544 1376 544
WIRE 32 560 32 528
WIRE 1632 592 1408 592
WIRE 1664 592 1632 592
WIRE 1664 608 1664 592
WIRE 1680 608 1664 608
WIRE 624 624 624 336
WIRE 784 624 624 624
WIRE 1376 624 1376 544
WIRE 1376 624 1248 624
WIRE 1872 624 1872 16
WIRE 1872 624 1728 624
WIRE 1072 656 1024 656
WIRE 1408 656 1408 592
WIRE 1408 656 1168 656
WIRE 1424 656 1408 656
WIRE -144 672 -144 432
WIRE 32 672 32 640
WIRE 32 672 -144 672
WIRE 784 672 784 624
WIRE 1072 672 1072 656
WIRE 1168 672 1168 656
WIRE 1248 672 1248 624
WIRE 1776 672 1728 672
WIRE 1792 672 1792 528
WIRE 1792 672 1776 672
WIRE 464 688 464 544
WIRE 752 688 464 688
WIRE 832 704 816 704
WIRE 1024 704 1024 656
WIRE 1024 704 832 704
WIRE 240 720 240 512
WIRE 752 720 240 720
WIRE 1376 736 1376 624
WIRE 1424 736 1376 736
WIRE 1632 752 1632 592
WIRE 1680 752 1632 752
WIRE 592 800 592 416
WIRE 592 800 32 800
WIRE 1072 800 1072 736
WIRE 1152 800 1072 800
WIRE 1168 800 1168 736
WIRE 1168 800 1152 800
WIRE 1248 800 1248 752
WIRE 1248 800 1168 800
WIRE 1584 800 1584 544
WIRE 1728 800 1728 768
WIRE 1728 800 1584 800
WIRE 32 832 32 800
WIRE 480 864 480 464
WIRE 784 864 784 736
WIRE 784 864 480 864
WIRE 32 928 32 912
WIRE 32 928 -112 928
WIRE -112 960 -112 928
FLAG 32 528 N_noise
IOPIN 32 528 In
FLAG 32 800 N_ml_trigger
IOPIN 32 800 In
FLAG 32 176 N_entropy
IOPIN 32 176 In
FLAG 304 352 N_entropy_filtered
FLAG 624 256 N_entropy_comp_out
FLAG 848 256 N_nand_interm
FLAG 816 112 N_nand_out
FLAG 1392 256 LOCK_OUT
IOPIN 1392 256 Out
FLAG 832 704 N_noise_comp_out
FLAG 1152 800 N_pulse_raw
FLAG 1168 656 N_pulse_clipped_pos
FLAG 1776 672 FLUSH_OUT
IOPIN 1776 672 Out
SYMBOL voltage 32 208 R0
WINDOW 3 24 38 Left 2
SYMATTR InstName V_entropy
SYMATTR Value PWL file=0 0 1m 5
SYMBOL voltage 32 544 R0
WINDOW 3 24 96 Invisible 2
SYMATTR InstName V_noise
SYMATTR Value PWL file=0 0 0.199m 0 0.2m 2.5 0.20005m 0 0.399m 0 0.4m 2.5 0.40005m 0 0.599m 0 0.6m 2.5 0.60005m 0 0.799m 0 0.8m 2.5 0.80005m 0 1m 0
SYMBOL voltage 32 816 R0
SYMATTR InstName V_ml_trigger
SYMATTR Value PWL file=0 0 0.499m 0 0.5m 1 1m 1
SYMBOL cap 384 224 R0
SYMATTR InstName C1
SYMATTR Value 1µ
SYMBOL cap 1056 672 R0
SYMATTR InstName C_diff
SYMATTR Value 100p
SYMBOL nmos 736 272 R0
SYMATTR InstName MNAND1
SYMATTR Value ""
SYMBOL nmos 1680 672 R0
SYMATTR InstName MFLUSH_INV_N
SYMATTR Value ""
SYMBOL nmos 736 128 R0
SYMATTR InstName MNAND2
SYMATTR Value ""
SYMBOL nmos 1328 288 R0
SYMATTR InstName MINV_N
SYMATTR Value ""
SYMBOL res 976 192 R0
SYMATTR InstName R_pullup_nand
SYMATTR Value 1k
SYMBOL res 1232 656 R0
SYMATTR InstName R_diff
SYMATTR Value 1k
SYMBOL res 1408 640 R0
SYMATTR InstName R_clip_pulldown
SYMATTR Value 1k
SYMBOL g -144 336 R0
SYMATTR InstName G1
SYMBOL g -112 944 R0
SYMATTR InstName G2
SYMBOL res 288 192 R0
SYMATTR InstName R1
SYMATTR Value 1k
SYMBOL g 400 48 R0
SYMATTR InstName G3
SYMBOL voltage 480 368 R0
SYMATTR InstName V_VSS
SYMATTR Value -5
SYMBOL g 784 448 R0
SYMATTR InstName G4
SYMBOL voltage 992 32 R0
SYMATTR InstName V_1v
SYMATTR Value 1
SYMBOL pmos 1328 128 R0
SYMATTR InstName MINV_P
SYMATTR Value ""
SYMBOL g 1376 432 R0
SYMATTR InstName G5
SYMBOL OpAmps/OP07 784 640 R0
SYMATTR InstName XU2
SYMBOL OpAmps/OP07 512 192 R0
SYMATTR InstName XU1
SYMBOL diode 1152 672 R0
SYMATTR InstName D_clip
SYMATTR Value 10k
SYMBOL pmos 1680 528 R0
SYMATTR InstName MFLUSH_INV_P
SYMATTR Value ""
SYMBOL voltage 656 16 R0
SYMATTR InstName VDD
SYMATTR Value 5
SYMBOL voltage 528 96 R0
SYMATTR InstName V_3V3
SYMATTR Value 3.3
SYMBOL voltage 528 528 R0
SYMATTR InstName V_2V
SYMATTR Value 2
